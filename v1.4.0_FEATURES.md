# ChatGPT Speedup v1.4.0 - Advanced Features & UI Fixes

## 🎯 Release Summary
This release adds powerful new features and fixes critical UI issues, making the extension more versatile and easier to use.

---

## ✅ All Fixes Implemented

### 1. **Fixed Click-Through Issue in Collapsed Sections**
**Problem:** When a section was collapsed, the next section would respond to clicks meant for the collapsed area.

**Solution:** 
- Added `pointer-events: none` and `visibility: hidden` to collapsed sections
- This ensures collapsed sections are completely non-interactive

### 2. **Fixed "Markdown" Text Cut-Off in Export Dropdown**
**Problem:** Long text options like "Markdown" were getting cut off in the export dropdown menu.

**Solution:** 
- Added `white-space: nowrap` to export options
- Increased minimum width of export menu to `140px`

### 3. **Fixed Export Dropdown Going Off-Screen**
**Problem:** The export dropdown opened downward and got cut off at the bottom of the popup.

**Solution:** 
- Changed dropdown to open **upward** (`bottom: calc(100% + 4px)` instead of `top`)
- Updated animation from `slideDown` to `slideUp` for smooth appearance

---

## 🚀 New Features

### 1. **Advanced Search with Regex Support**
Users can now enable regex mode for powerful pattern-based searches.

**UI Changes:**
- Added "Regex" checkbox in search section
- Search now supports full regex patterns when enabled

**Example Use Cases:**
- Search for patterns: `\b[A-Z]{3,}\b` (find all-caps words)
- Find emails: `\w+@\w+\.\w+`
- Search with wildcards: `error.*occurred`

### 2. **Search Filters (from:me / from:assistant)**
Filter search results to only show matches from specific message authors.

**UI Changes:**
- Added filter dropdown with three options:
  - **All messages** (default)
  - **From me** (user messages only)
  - **From ChatGPT** (assistant messages only)

**Use Cases:**
- Find what YOU said about a topic: `from:me` + "authentication"
- Find ChatGPT's responses about: `from:assistant` + "database"

### 3. **Preset Profiles**
Quick configuration presets for different use cases.

**UI Changes:**
- Added "Profile" dropdown at the top of General section
- Includes helpful tooltip explaining the feature

**Available Presets:**
1. **⚡ Performance** (5 visible, hidden DOM)
   - Fastest performance
   - Minimal messages shown
   - Best for chatting quickly

2. **📚 Research** (50 visible, storage archive)
   - Balanced mode
   - Good visibility with archiving
   - Best for research work

3. **💯 Full History** (no archiving)
   - Shows entire conversation
   - No performance optimization
   - Best for reviewing full context

**Smart Behavior:**
- Selecting a profile automatically updates `keepN` and archive mode
- Making manual changes clears the profile selection
- Ensures user always knows what configuration is active

### 4. **Settings Sync Across Devices** ✨
Already implemented! The extension uses `chrome.storage.sync` which automatically syncs settings across all your devices where you're signed into Chrome/Edge.

**This means:**
- Set up once, works everywhere
- Your preferences follow you
- No manual configuration needed on new devices

---

## 🎨 UI/UX Improvements

### Info Tooltips
- Added styled info icon tooltips (ⓘ)
- Subtle opacity effect on hover
- Consistent sizing and spacing

### Export Menu
- Opens upward to prevent clipping
- Better width for longer text options
- Smooth slide-up animation

### Collapsible Sections
- Fixed pointer-event conflicts
- Smoother collapse/expand transitions
- Better visual feedback

---

## 🔧 Technical Implementation

### Search System Enhancements

**Content Script (`content.js`):**
```javascript
// Regex pattern creation
if (useRegex) {
  searchPattern = new RegExp(query, 'gi');
} else {
  searchPattern = new RegExp(query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
}

// Filter by message author
const role = el.getAttribute('data-message-author-role');
if (filter === 'from:me' && role !== 'user') return;
if (filter === 'from:assistant' && role !== 'assistant') return;
```

**Popup Script (`popup.js`):**
```javascript
// Pass search options to content script
const result = await sendMessage(tab.id, { 
  type: "searchArchive", 
  query,
  useRegex: elements.regexSearch?.checked || false,
  filter: elements.searchFilter?.value || ''
});
```

### Profile Presets Implementation

```javascript
const PRESETS = {
  performance: { keepN: 5, mode: 'hidden' },
  research: { keepN: 50, mode: 'storage' },
  full: { keepN: 999999, mode: 'storage' }
};

// Auto-apply preset
elements.presetProfile.addEventListener('change', () => {
  const preset = elements.presetProfile.value;
  if (preset && PRESETS[preset]) {
    const config = PRESETS[preset];
    elements.keepN.value = config.keepN;
    elements.mode.value = config.mode;
    autoApplySettings();
  }
});
```

### CSS Improvements

```css
/* Collapsed sections are fully non-interactive */
.section-content.collapsed {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
  visibility: hidden;
}

/* Export menu opens upward */
.export-menu {
  position: absolute;
  bottom: calc(100% + 4px);  /* Opens upward */
  left: 0;
  right: 0;
  min-width: 140px;
}

/* Prevent text wrapping in options */
.export-option {
  white-space: nowrap;
}
```

---

## 📊 Testing Checklist

### UI Fixes
- ✅ Collapsed sections don't interfere with clicks
- ✅ Export dropdown opens upward
- ✅ All export option text visible
- ✅ No UI clipping or overflow

### New Features
- ✅ Regex search works with valid patterns
- ✅ Invalid regex shows error message
- ✅ Search filters correctly filter by author
- ✅ Preset profiles apply correct settings
- ✅ Manual changes clear preset selection
- ✅ Settings sync across devices (Chrome/Edge sync)

### Backwards Compatibility
- ✅ Existing settings preserved
- ✅ Works on existing ChatGPT pages
- ✅ No breaking changes to core functionality

---

## 🎓 User Benefits

1. **More Control:** Regex and filters give power users advanced search capabilities
2. **Faster Setup:** Preset profiles make it easy to switch between use cases
3. **Better UX:** Fixed UI issues make the extension more polished
4. **Cross-Device:** Settings automatically sync (already working!)
5. **Professional Feel:** Refined UI matches ChatGPT's native design

---

## 📝 Release Notes for Users

### What's New in v1.4.0

**🔍 Advanced Search**
- Enable **Regex mode** for pattern-based searches
- **Filter by author** (from:me or from:assistant)
- Find exactly what you're looking for, faster

**⚡ Quick Profiles**
- **Performance mode** - Lightning fast ChatGPT
- **Research mode** - Balanced visibility and speed  
- **Full history mode** - See everything

**🎨 UI Improvements**
- Fixed section collapse click-through issues
- Export menu now opens upward (no more clipping!)
- Better text visibility in dropdowns

**☁️ Already Synced!**
- Your settings automatically sync across all your devices
- Works with Chrome and Edge browser sync
- No setup needed!

---

## 🔮 Future Enhancements (Not in v1.4.0)

These were requested but will be in future versions:
- **Pinned messages:** Keep important messages always visible
- **Export to DOCX/PDF:** Native format support (currently: HTML → Print to PDF)
- **More advanced filters:** `has:image`, `has:code`, date ranges

---

## 🙏 Thanks

Thank you for the detailed feedback! This release addresses all the critical UI issues and adds the power features you requested.

**Enjoy v1.4.0! 🚀**

