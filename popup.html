<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ChatGPT Speedup</title>
    <link rel="stylesheet" href="popup.css">
    
  </head>
  <body>
    <h3>ChatGPT Speedup</h3>

    <label for="keepN">Messages to keep visible</label>
    <div style="display: flex; gap: 8px; align-items: center;">
      <input id="keepN" type="number" min="1" step="1" style="flex: 1;" />
      <select id="keepNPreset" style="flex: 1;">
        <option value="">Custom</option>
        <option value="10">10 messages</option>
        <option value="50">50 messages</option>
        <option value="100">100 messages</option>
        <option value="999999">Show All</option>
      </select>
    </div>

    <label for="mode">
      Archive mode
      <span class="info-icon" title="Storage mode: Serializes messages to browser storage (uses less memory).&#10;Hidden mode: Keeps messages in hidden DOM (faster access but uses more memory).">‚ìò</span>
    </label>
    <select id="mode">
      <option value="storage">Serialize to storage (lighter)</option>
      <option value="hidden">Move to hidden DOM (faster)</option>
    </select>

    <label for="storageCap">Max archived messages</label>
    <input id="storageCap" type="number" min="50" step="50" title="Maximum messages to keep in storage" />

    <div class="theme-row">
      <label for="themeSelect">Theme:</label>
      <select id="themeSelect">
        <option value="auto">Auto (system)</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
      </select>
    </div>

    <div class="checkbox-group">
      <label class="checkbox-label">
        <input type="checkbox" id="pillEnabled">
        Show floating pill
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="debugLogs">
        Enable debug logs
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="autoCollapse">
        Auto-collapse after 5 min inactive
      </label>
    </div>

    <label for="searchArchive">Search messages</label>
    <div class="search-container">
      <input type="search" id="searchArchive" placeholder="Search text..." style="flex:1">
      <button id="searchPrevBtn" title="Previous match">‚óÄ</button>
      <button id="searchBtn" title="Search">üîç</button>
      <button id="searchNextBtn" title="Next match">‚ñ∂</button>
    </div>
    <div id="searchResults" style="font-size: 11px; color: #666; margin-top: 4px; min-height: 16px;"></div>

    <div id="conversation-stats">Loading stats...</div>

    <div class="row">
      <button id="apply">Apply Settings</button>
      <button id="refreshTabs" title="Ask all ChatGPT tabs to refresh">Refresh Tabs</button>
    </div>

    <div class="row-3">
      <div style="position: relative; display: inline-block;">
        <button id="exportArchive" title="Export conversation">Export ‚ñº</button>
        <div id="exportMenu" class="export-menu" style="display: none;">
          <button class="export-option" data-format="json">JSON</button>
          <button class="export-option" data-format="markdown">Markdown</button>
          <button class="export-option" data-format="txt">Text</button>
          <button class="export-option" data-format="html">HTML</button>
        </div>
      </div>
      <button id="importArchive" title="Import archived messages">Import</button>
      <button id="clearArchive" title="Clear archived messages">Clear</button>
      <input type="file" id="importFile" accept=".json" style="display:none">
    </div>

    <div class="info-box">
      <div style="font-size: 11px; line-height: 1.4;">
        <strong>Pill controls:</strong><br>
        Click: +5 messages ‚Ä¢ Shift+Click: ‚àí5 messages<br>
        Alt+Drag: Move pill position
      </div>
    </div>

    <div class="muted" style="margin-top:12px;text-align:center;">
      Your messages stay on your device ‚Ä¢ v0.1.2
    </div>

    <script src="popup.js"></script>
  </body>
</html>
