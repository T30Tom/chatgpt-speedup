<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ChatGPT Speedup</title>
    <link rel="stylesheet" href="popup.css">
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h3>‚ö° ChatGPT Speedup</h3>
      </div>

      <!-- General Section -->
      <div class="section">
        <div class="section-header" data-section="general">
          <span class="section-icon">üìå</span>
          <span class="section-title">General</span>
          <span class="collapse-icon">‚ñº</span>
        </div>
        <div class="section-content" id="general-content">
          <div class="setting-group">
            <label for="presetProfile">Profile
              <span class="info-tooltip" title="Quick presets for different use cases">‚ìò</span>
            </label>
            <select id="presetProfile" class="select-full">
              <option value="">Custom</option>
              <option value="performance">‚ö° Performance (5 visible, hidden DOM)</option>
              <option value="research">üìö Research (50 visible, storage)</option>
              <option value="full">üíØ Full History (no archiving)</option>
            </select>
          </div>

          <div class="setting-group">
            <label for="keepN">Messages to keep visible</label>
            <div class="dual-input">
              <input id="keepN" type="number" min="1" step="1" class="input-small" />
              <select id="keepNPreset" class="select-small">
                <option value="">Custom</option>
                <option value="10">10</option>
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="999999">Show All</option>
              </select>
            </div>
          </div>
          
          <div class="setting-group">
            <label for="themeSelect">Theme</label>
            <select id="themeSelect" class="select-full">
              <option value="auto">Auto (system)</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Archiving Section -->
      <div class="section">
        <div class="section-header" data-section="archiving">
          <span class="section-icon">üì¶</span>
          <span class="section-title">Archiving</span>
          <span class="collapse-icon">‚ñº</span>
        </div>
        <div class="section-content" id="archiving-content">
          <div class="setting-group">
            <label for="mode">
              Archive mode
              <span class="info-tooltip" title="Storage: Serializes to browser storage (uses less memory)&#10;Hidden: Keeps in hidden DOM (faster but uses more memory)">‚ìò</span>
            </label>
            <select id="mode" class="select-full">
              <option value="storage">Serialize to storage (lighter)</option>
              <option value="hidden">Move to hidden DOM (faster)</option>
            </select>
          </div>

          <div class="setting-group">
            <label for="storageCap">Max archived messages</label>
            <input id="storageCap" type="number" min="50" step="50" class="input-full" />
          </div>

          <div class="setting-group">
            <label class="checkbox-label">
              <input type="checkbox" id="autoCollapse">
              <span class="checkbox-icon">‚è±Ô∏è</span>
              <span>Auto-collapse after 5 min inactive</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Interface Section -->
      <div class="section">
        <div class="section-header" data-section="interface">
          <span class="section-icon">üëÅÔ∏è</span>
          <span class="section-title">Interface</span>
          <span class="collapse-icon">‚ñº</span>
        </div>
        <div class="section-content" id="interface-content">
          <div class="setting-group">
            <label class="checkbox-label">
              <input type="checkbox" id="pillEnabled">
              <span class="checkbox-icon">üíä</span>
              <span>Show floating pill</span>
            </label>
          </div>

          <div class="setting-group">
            <label class="checkbox-label">
              <input type="checkbox" id="debugLogs">
              <span class="checkbox-icon">üêõ</span>
              <span>Enable debug logs</span>
            </label>
          </div>

          <div class="pill-controls">
            <div class="controls-title">Pill controls:</div>
            <div class="controls-list">
              <div class="control-item">‚Ä¢ Click ‚Üí +5 messages</div>
              <div class="control-item">‚Ä¢ Shift+Click ‚Üí ‚àí5 messages</div>
              <div class="control-item">‚Ä¢ Alt+Drag ‚Üí Move pill</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Search Section -->
      <div class="section">
        <div class="section-header" data-section="search">
          <span class="section-icon">üîç</span>
          <span class="section-title">Search</span>
          <span class="collapse-icon">‚ñº</span>
        </div>
        <div class="section-content" id="search-content">
          <div class="search-container">
            <input type="search" id="searchArchive" placeholder="Search messages..." class="search-input">
            <button id="searchBtn" class="icon-btn" title="Search">üîé</button>
          </div>
          <div class="search-options">
            <label class="checkbox-label">
              <input type="checkbox" id="regexSearch">
              <span>Regex</span>
            </label>
            <select id="searchFilter" class="search-filter">
              <option value="">All messages</option>
              <option value="from:me">From me</option>
              <option value="from:assistant">From ChatGPT</option>
            </select>
          </div>
          <div class="search-nav">
            <button id="searchPrevBtn" class="nav-btn">‚óÄ Prev</button>
            <div id="searchResults" class="search-results"></div>
            <button id="searchNextBtn" class="nav-btn">Next ‚ñ∂</button>
          </div>
        </div>
      </div>

      <!-- Stats Section -->
      <div class="section">
        <div class="section-header" data-section="stats">
          <span class="section-icon">üìä</span>
          <span class="section-title">Stats</span>
          <span class="collapse-icon">‚ñº</span>
        </div>
        <div class="section-content" id="stats-content">
          <div id="conversation-stats" class="stats-panel">
            <div class="stat-row">
              <span class="stat-label">Visible:</span>
              <span class="stat-value" id="stat-visible">-</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Total:</span>
              <span class="stat-value" id="stat-total">-</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Archived:</span>
              <span class="stat-value" id="stat-archived">-</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Archived %:</span>
              <span class="stat-value" id="stat-percent">-</span>
            </div>
            <div class="stat-row">
              <span class="stat-label">Memory saved:</span>
              <span class="stat-value" id="stat-memory">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Section -->
      <div class="section">
        <div class="section-header" data-section="data">
          <span class="section-icon">üíæ</span>
          <span class="section-title">Data</span>
          <span class="collapse-icon">‚ñº</span>
        </div>
        <div class="section-content" id="data-content">
          <div class="button-row">
            <div class="export-wrapper">
              <button id="exportArchive" class="action-btn">Export ‚ñº</button>
              <div id="exportMenu" class="export-menu">
                <button class="export-option" data-format="json">JSON</button>
                <button class="export-option" data-format="markdown">Markdown</button>
                <button class="export-option" data-format="txt">Text</button>
                <button class="export-option" data-format="html">HTML</button>
              </div>
            </div>
            <button id="importArchive" class="action-btn">Import</button>
            <button id="clearArchive" class="action-btn danger">Clear</button>
            <input type="file" id="importFile" accept=".json" style="display:none">
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <div class="footer-top">
          <span class="version">Version v1.3.0</span>
          <span class="separator">‚Ä¢</span>
          <span class="privacy">Messages stay on your device</span>
        </div>
        <div class="disclaimer">
          If you don't see changes, try reloading the ChatGPT page
        </div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
